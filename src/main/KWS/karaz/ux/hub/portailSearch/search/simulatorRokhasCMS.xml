<?xml version="1.0" encoding="UTF-8"?>
<search name="SimulatorRokhasCMS" label="Simulator Rokhas CMS">

	<query>
	</query>
	<data>
		<query>
			<search />
            <idObject />
            <parentP />
		</query>
		<collapsed>false</collapsed>
	</data>
	<view>
		 <screen labelWidth="80" label="My Dashboard" noToolBar="true">      
        <script postLoad="true">
            
            getTreeFromEs(0);            


             $(".simulator-cms .navbar-sim-cms .navbar-sim-cms-item").click(function(){
                $(".simulator-cms .navbar-sim-cms .navbar-sim-cms-item").removeClass("active");
                $(this).addClass("active");
                var page = $(this).attr("class").split(" ")[1].split("-")[1];
                $(".simulator-cms .container-sim-cms .ow-vbox").hide();
                
                if(page=="1"){
                    showDivManager(2);
                }else if(page=="2"){
                    showDivManager(1);
                    getAllDocsClass(0);
                }else if(page=="3"){
                    showDivManager(3);
                    getAllDocsClass(1);
                }else if(page=="4"){
                    showDivManager(6);
                    getAllCoumnsMatrixCn4();
                }

                $(".simulator-cms .container-sim-cms .container-"+page).show();
            });

            $(".simulator-cms .side-bar .body .div-1 .cms-form .class-update-button button.save").click(function(){
                var id = $(".simulator-cms .side-bar .body .div-1 .cms-form input.class-id").val();
                updateNode(id);
            });

            $(".simulator-cms .side-bar .body .div-2 .cms-form .class-update-button button.save").click(function(){
                getQuestionDet();
            });

            $(".simulator-cms .side-bar .body .div-2 .cms-form .class-update-button button.remove").click(function(){
                if(confirm("Si vous acceptez la question va être supprimée et donc le noeud sera vide, n'oubliez pas de lier ce noeud à une question déjà stockée.")){
                    removeQuestion();                
                }
            });
            
            $(".simulator-cms .side-bar .body .div-3 .cms-form-2 .class-update-button button").click(function(){
                addQuestionForm();
            });
            
            $(".simulator-cms .side-bar .body .div-1 .cms-form .class-question i.fa-edit").click(function(){
                modeUpdate();
            });

            $(".simulator-cms .side-bar .body .div-1 .cms-form .class-question i.fa-plus").click(function(){
                showAddQuestionForm();
            });
            
           $(".simulator-cms .side-bar .body .div-1 .cms-form .class-question .link-sim-cms span.qst").click(function(){
                var id = $(".cms-form .body-cms-form .class-question .link-sim-cms span.qst").attr("title");
                if(id!=undefined){
                    getQuestionCms(id);
                }
                
            });
             
            $(".simulator-cms .side-bar .body .div-3 .cms-form-2 .class-type-question select").change(function(){
                var type = $(this).children("option:selected").val();
                if(type=="input"){
                    $(".simulator-cms .side-bar .body .div-3 .cms-form-2 .class-responses-q").hide();
                }else{
                    $(".simulator-cms .side-bar .body .div-3 .cms-form-2 .class-responses-q").show();                
                }

                if(type=="input" || type=="input-conditional"){
                    $(".simulator-cms .side-bar .body .div-3 .cms-form-2 .class-placeholder").show();
                }else{
                    $(".simulator-cms .side-bar .body .div-3 .cms-form-2 .class-placeholder").hide();                
                }
            });

             $(".simulator-cms .side-bar .body .div-2 .cms-form .class-type-question select").change(function(){
                var type = $(this).children("option:selected").val();
                if(type=="input"){
                    $(".simulator-cms .side-bar .body .div-2 .cms-form .class-responses-q").hide();
                }else{
                    $(".simulator-cms .side-bar .body .div-2 .cms-form  .class-responses-q").show();                
                }

                if(type=="input" || type=="input-conditional"){
                    $(".simulator-cms .side-bar .body .div-2 .cms-form .class-placeholder-q").show();
                }else{
                    $(".simulator-cms .side-bar .body .div-2 .cms-form .class-placeholder-q").hide();                
                }
            });

            $(".simulator-cms .container-sim-cms .container-1 .button-upload-es button.save").click(function(){
                uploadTreeToES();
            });

            $(".simulator-cms .container-sim-cms .container-1 .button-upload-es button.reset").click(function(){
                if(confirm("Veuillez vous réinitialiser ?")){
                    getTreeFromEs(0);
                }
                    
            });

            $(".simulator-cms .side-bar .body .div-1 .cms-form .class-update-button button.class-end-button").click(function(){
                if(removeMtrixCLass==true){
                   alert("Vous avez annulé la classification de ce noeud, Veuillez d'abord annuler ou sauvegarder vos modifications."); 
                }else{
                    $(".simulator-cms .side-bar .body").hide();
                    var id = $(".simulator-cms .side-bar .body .div-1 .cms-form input.class-id").val();
                    objectJsonMatrixColumns = {};
                    beginStepsMatrixColumns(id);
                    $(".simulator-cms .side-bar .body1 .docs-in .docs-list").html("");
                    $(".simulator-cms .side-bar .body1 .docs-in .docs-added").html("");
                    $(".simulator-cms .side-bar .body1 .docs-in .header-doc span").removeClass("active");
                    $(".simulator-cms .side-bar .body1 .docs-in .header-doc span.docs-requis").addClass("active");
                    $(".simulator-cms .side-bar .body1 .docs-in .docs-in-buttons button").eq(1).hide();
                    $(".simulator-cms .side-bar .body1 .docs-in .docs-in-buttons button").eq(0).show();
                    $(".simulator-cms .side-bar .body1 input.tree-pos").val();
                    $(".simulator-cms .side-bar .body1").show();
                    step = 0;
                }
            });


            $(".simulator-cms .side-bar .body .div-1 .cms-form .class-update-button button.reset").click(function(){
                var id = $(".cms-form  input.class-id").val(); 
                showUpdate(id);
            });

            var step = 0;
            $(".simulator-cms .side-bar .body1 .docs-in .docs-in-buttons button.save").click(function(){
                var id = $(".simulator-cms .side-bar .body .div-1 .cms-form input.class-id").val();
                nextStepDocsIn(step,id);
                step++;
                if(step==3)step=0;
            });

            $(".Header-signup .Header-signup-logo .Header-signup-min .menu-bar-icon i").click(function(){
                        $(".header-div-toggle").toggle("fast"); 
            });

            $(".simulator-cms .side-bar .body .div-4 .class-update-button button").click(function(){
                var docObj = getModifyObject(0);
                getMaxDocsClass(0,docObj);
                console.log(docObj);
            });
            $(".simulator-cms .side-bar .body .div-5 .class-update-button button").click(function(){
                var docObj = getModifyObject(1);
                getMaxDocsClass(1,docObj);
                console.log(docObj);
            });
            $(".simulator-cms .side-bar .body .div-6 .class-update-button button").click(function(){
                var docObj = getModifyObject(2);
                updateDocClass(0,docObj);
            });
            $(".simulator-cms .side-bar .body .div-7 .class-update-button button").click(function(){
                var docObj = getModifyObject(3);
                updateDocClass(1,docObj);
            });
            
            $(".simulator-cms .container-sim-cms .container-2 .add-doc-class").click(function(){
                showDivManager(1);
            });

            $(".simulator-cms .container-sim-cms .container-3 .add-doc-class").click(function(){
                showDivManager(3);
            });

            showUpdate("");
            $(".simulator-cms .side-bar .body .div-1 .cms-form .class-question .link-sim-cms span").click();
            dragscroll.reset();
            
            $(".container-sim-cms").click(function(){
                $(".simulator-cms .container-sim-cms .container-1 .button-upload-es span.valide").hide();
            });


        </script>
        
        <vbox columns="20% 80%" className="Header-signup" columns-small="auto">
            <vbox className="Header-signup-logo">
                <html className="Header-signup-glo">
                    <div class="rokhas-home" style="margin-left: 50px;">
                        <img src="./img/rokhasRectBlueArFr.svg" style="height:45px;" />
                    </div>
                </html>
                <vbox className="Header-signup-min" columns="20% 60% 20%" columns-small="20% 60% 20%">
                    <html className="menu-bar-img">
                        <img src="web/css/img/LogoSquare.svg" alt="" />
                    </html>
                    <html />
                    <html className="menu-bar-icon">
                        <i class="fas fa-bars" />
                    </html>    
                </vbox>
            </vbox>
            
            <vbox columns="60% 25% 15%" className="header-div-toggle">
 <vbox className="header-menu" columns="20% 19% 22% 19% 19% 6%">
                   <button label="Actualités">
                        <postChange>

                        </postChange>
                   </button>
                   <button label="Simulateur">
                        <postChange>
                            ApplicationManager.run("karaz/ux/hub/portailsearch/search/SimulatorRokhas", "search", "Simulator Rokhas", {});
                        </postChange>
                   </button>
                    <button label="Open data">
                        <postChange>
                            ApplicationManager.run("karaz/ux/hub/portailsearch/search/PublicCentralSearch","search", "PublicCentralSearch", {});
                        </postChange>
                   </button>
                   <button label="Solutions">
                        <postChange>

                        </postChange>
                   </button>
                   <button label="Ressources">
                        <postChange>

                        </postChange>
                   </button>
                   <button icon="far fa-question-circle">
                       <postChange />
                   </button>
                      
            
                </vbox>

                <vbox className="vbox-button-signup-header" columns="50% 50%">
                    <button label="Inscription" className="button-signup-header button-left">	
                        <postChange>
                                ApplicationManager.run('karaz/signup/gestioncompte/search/FormSignupSearch?step=step2','search','search',{});
                        </postChange>						
                    </button>
                    <button label="Connexion" className="button-signup-header">	
                        <postChange>
                                //ApplicationManager.run('karaz/signup/gestioncompte/search/FormSignupSearch?','search','search',{});
                                ApplicationManager.run('/karazal/kas/loginSamlSP?newUser=true','openLinkLocal','openLinkLocal');
                        </postChange>					
                    </button>
                </vbox>
                 
            </vbox>
        </vbox>
        <html id="hSeparator">
            <div style="height: 30px;"> </div>
        </html>        
           
            
            
        <vbox className="hp-small simulator-cms" columns="70% 30%">
            <vbox>
                <vbox className="navbar-sim-cms" columns="20% 20% 20% 20% 20%">
                    <html>
                        <div class="navbar-sim-cms-item nav-1 active">
                            <i class="fas fa-project-diagram" />
                           <span>Arbre de décision</span>
                    </div>
                    </html>
                    <html>
                        <div class="navbar-sim-cms-item nav-2">
                           <i class="fas fa-file-alt" />
                           <span>Liste des documents</span>
                        </div>
                    </html><html>
                        <div class="navbar-sim-cms-item nav-3">
                            <i class="fas fa-tasks" />
                           <span>Liste des étapes</span>
                        </div>
                    </html><html>
                        <div class="navbar-sim-cms-item nav-4">
                           <i class="fas fa-table" />
                           <span>Matrice de classement</span>
                        </div>
                    </html>
                </vbox>
                <vbox className="container-sim-cms">
                    <vbox className="container-1">
                        <html>
                            <div id="tree-simple" class="dragscroll" style="width:100.5%; height: 741px"> 
                                <div class="gif-load-simulator-cms"><img src="img/load-text.gif" /></div>
                            </div>
                            <div class="button-upload-es">
                                <button class="reset" style="background:green"><span>Réinitialiser</span></button>
                                <button class="save"><span>Sauvegarder dans ES</span></button>
                                <span class="valide" style="display:none">Indexé <i class="fas fa-check" /></span>
                            </div>
                        </html>
                    </vbox>
                    <vbox className="container-2">
                        <html>
                            <div class="add-doc-class">
                                <i class="fas fa-plus" /> Ajouter un document
                            </div>
                            <div class="container-docs">
                            
                            </div>
                        </html>
                    </vbox>
                    <vbox className="container-3">
                        <html>
                            <div class="add-doc-class">
                                <i class="fas fa-plus" /> Ajouter une étape
                            </div>
                            <div class="container-steps">
                            
                            </div>
                        </html>
                    </vbox>    
                    <vbox className="container-4">
                        <html>
                            <table class="tab-matrix">
                            
                            </table>
                        </html>
                    </vbox>
                    <vbox className="container-load" />
                </vbox>
            </vbox>
            <vbox className="side-bar">
                <vbox className="header">
                    <html>
                        <i class="fas fa-cogs" />
                        <span>Rokhas Simulateur</span>
                    </html>
                </vbox>
                <vbox className="body">
                    <vbox className="div-1" style="display:none">
                        <html>
                           
                            <div class="cms-form">
                              <input type="hidden" class="class-id" value="" />
                               <div class="header-cms-form">
                                    <span class="node-name">
                                    
                                    </span> 
                                    
                                </div>
                               <div class="body-cms-form">
                                <div class="class-title form-grid"><span>Node </span><span><input type="text" value="Root" /></span></div>
                                <div class="class-oid form-grid">
                                    <span>Etat </span>
                                    <span class="classee">
                                       Non Classé  
                                    </span>
                                </div>
                                <div class="class-question form-grid"><span>Question </span><span class="link-sim-cms" style="display: grid;grid-template-columns: 85% 14%;"><span class="qst" style="border:none;" title="10">Quel est votre question ?</span><span class="update" style="display:none;position:relative;"></span><i class="fas fa-edit" /><i style="display:none" class="fas fa-plus" /><i style="display:none" class="fas fa-pen "></i></span></div>
                                <div class="class-responses">
                                  <span>Childrens : </span>
                                   <div class="responses-sim-cms">
                                     <div><span class="link-sim-cms">Child 1 </span></div>
                                     <div><span class="link-sim-cms">Child 2 </span></div>
                                     <div><span class="link-sim-cms">Child 3 </span></div>
                                   </div>
                                </div>
                                <div class="class-update-button">
                                   <button class="class-end-button" style="background: red;">Fin du chemin</button>
                                   <button class="save">Sauvegarder</button>
                                   <button class="reset" style="background: #999;">Annuler</button>
                                </div>
                                </div>
                            </div>
                        </html>
                    </vbox>
                    <vbox className="div-2" style="display:none">
                        <html>
                            <div class="cms-form">
                              <input type="hidden" class="class-id-qr" value="" />
                               <div class="header-cms-form">Modifier la question</div>
                               <div class="body-cms-form">
                                    <div class="class-question-q form-grid"><input type="hidden" class="id" /><span>Question </span><span class="link-sim-cms">Quel est votre question ?</span></div>
                                    <div class="class-type-question form-grid">
                                        <span>Type </span>
                                        <span class="link-sim-cms">
                                            <select>
                                                <option value="check">Check box</option>
                                                <option value="select">Select</option>
                                                <option value="input">Input</option>
                                                <option value="input-conditional">Input Conditionnel</option>
                                            </select>
                                        </span>
                                    </div>
                                    <div class="class-responses-q">
                                      <span>Reponse : </span>
                                       <div class="responses-sim-cms" />
                                        
                                    </div>
                                    <div class="class-placeholder-q" style="display:none">
                                      <span>Placeholder : </span>
                                       <div class="responses-sim-cms">
                                         <input class="placeholder" type="text" placeholder="Résponses séparer par // Exemple: rep1//rep2//rep3" />
                                       </div>
                                    </div>
                                    
                                    <div class="class-update-button">
                                        <button class="save">Sauvegarder</button>
                                        <button class="remove" style="background:red">Supprimer</button>
                                    </div>
                                </div>
                            </div>
                        </html>
                    </vbox>
                    <vbox className="div-3">
                        <html>
                            <div class="cms-form-2">
                              <input type="hidden" class="class-id-qr" value="" />
                               <div class="header-cms-form">Ajouter une question</div>
                               <div class="body-cms-form">
                                    <div class="class-question-q form-grid"><span>Question </span><span class="link-sim-cms"><textarea placeholder="votre Question" /></span></div>
                                    <div class="class-type-question form-grid">
                                        <span>Type </span>
                                        <span class="link-sim-cms">
                                            <select>
                                                <option value="check">Check box</option>
                                                <option value="select">Select</option>
                                                <option value="input">Input</option>
                                                <option value="input-conditional">Input Conditionnel</option>
                                            </select>
                                        </span>
                                    </div>
                                    <div class="class-responses-q">
                                      <span>Reponses : </span>
                                       <div class="responses-sim-cms">
                                         <input class="reponses" type="text" placeholder="Résponses séparer par // Exemple: rep1//rep2//rep3" />
                                       </div>
                                    </div>
                                    <div class="class-placeholder" style="display:none;">
                                      <span>Placeholder : </span>
                                       <div class="responses-sim-cms">
                                         <input class="placeholder" type="text" placeholder="Résponses séparer par // Exemple: rep1//rep2//rep3" />
                                       </div>
                                    </div>
                                    <div class="class-update-button">
                                        <button>Ajouter</button>
                                    </div>
                                </div>
                            </div>
                        </html>
                    </vbox>
                    <vbox className="div-4">
                        <html>
                            <div class="cms-form-2">
                              <input type="hidden" class="class-id-qr" value="" />
                               <div class="header-cms-form">Ajouter un document</div>
                               <div class="body-cms-form">
                                    <div class="class-question-q form-grid"><span>Titre </span><span class="link-sim-cms"><input type="text" placeholder="Titre du document" /></span></div>
                                    <div class="class-type-question form-grid">
                                        <span>Type </span>
                                        <span class="link-sim-cms">
                                            <select>
                                                <option value="type-1">Type 1</option>
                                                <option value="type-2">Type 2</option>
                                            </select>
                                        </span>
                                    </div>
                                    <div class="class-update-button">
                                        <button>Ajouter</button>
                                    </div>
                                </div>
                            </div>
                        </html>
                    </vbox>
                    <vbox className="div-5">
                        <html>
                            <div class="cms-form-2">
                              <input type="hidden" class="class-id-qr" value="" />
                               <div class="header-cms-form">ajouter une étape</div>
                               <div class="body-cms-form">
                                    <div class="class-question-q form-grid"><span>Titre </span><span class="link-sim-cms"><input type="text" placeholder="Titre du document" /></span></div>
                                    <div class="class-desc-q form-grid"><span>Description </span><span class="link-sim-cms"><input type="text" placeholder="Description" /></span></div>
                                    <div class="class-membre-q form-grid"><span>Membres</span><span class="link-sim-cms"><input type="text" placeholder="Séparer par - Exemple : membre1-membre2" /></span></div>
                                    
                                    <div class="class-update-button">
                                        <button>Ajouter</button>
                                    </div>
                                </div>
                            </div>
                        </html>
                    </vbox>
                    <vbox className="div-6">
                        <html>
                            <div class="cms-form-2">
                              <input type="hidden" class="class-id-qr" value="" />
                               <div class="header-cms-form">Modifier le document</div>
                               <div class="body-cms-form">
                                    <input type="hidden" class="input-id" value="" />
                                    <div class="class-question-q form-grid"><span>Titre </span><span class="link-sim-cms"><input type="text" placeholder="Titre du document" /></span></div>
                                    <div class="class-type-question form-grid">
                                        <span>Type </span>
                                        <span class="link-sim-cms">
                                            <select>
                                                <option value="type-1">Type 1</option>
                                                <option value="type-2">Type 2</option>
                                            </select>
                                        </span>
                                    </div>
                                    <div class="class-update-button">
                                        <button>Modifier</button>
                                    </div>
                                </div>
                            </div>
                        </html>
                    </vbox>
                    <vbox className="div-7">
                        <html>
                            <div class="cms-form-2">
                              <input type="hidden" class="class-id-qr" value="" />
                               <div class="header-cms-form">Modifier l'étape</div>
                               <div class="body-cms-form">
                                    <input type="hidden" class="input-id" value="" />
                                    <div class="class-question-q form-grid"><span>Titre </span><span class="link-sim-cms"><input type="text" placeholder="Titre du document" /></span></div>
                                    <div class="class-desc-q form-grid"><span>Description </span><span class="link-sim-cms"><input type="text" placeholder="Description" /></span></div>
                                    <div class="class-membre-q form-grid"><span>Membres</span><span class="link-sim-cms"><input type="text" placeholder="Séparer par - Exemple : membre1-membre2" /></span></div>
                                    
                                    <div class="class-update-button">
                                        <button>Modifier</button>
                                    </div>
                                </div>
                            </div>
                        </html>
                    </vbox>
                </vbox>
                <vbox className="body1">
                        <vbox className="docs-in">
                            <html>
                                <div class="header-doc">
                                    <span class="docs-requis active"><i class="fas fa-file-alt" /> Documents Requis</span>
                                    <span class="docs-comp"><i class="fas fa-file-alt" /> Documents complémentaires</span>
                                    <span class="steps"><i class="fas fa-tasks" /> Etapes</span>
                                </div>
                                <div class="docs-added">
                                    
                                </div>
                                <div class="separate" />
                                <div class="docs-list">
                                         
                                </div>
                                <div class="docs-in-buttons">
                                    <button class="save">Suivant</button>
                                    <button class="save" style="display:none;">Sauvegarder</button>
                                </div>
                            </html>
                        </vbox>                          
                </vbox>
            </vbox>        
        </vbox> 
        
        
            
        
        <html> <div style="height: 30px;"> </div> </html>            
        
    </screen>

	</view>


</search>
