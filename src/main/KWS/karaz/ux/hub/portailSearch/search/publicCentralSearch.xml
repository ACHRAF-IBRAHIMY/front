<?xml version="1.0" encoding="UTF-8"?>
<search name="PublicCentralSearch" label="PublicCentralSearch">
<query> 
</query> 
<data>
		<query> 
			<keys />
			<model />
			<from />
			<to />  
			<task>true</task>  
			<object>true</object>  
			<document>true</document>  
			<annotation>true</annotation>  
			<others>true</others>
            
            <userLogin />
            <userPassword />            
		</query>
	</data>
    
    
  <view>
        
    /********************************************************/
    /*      START :: #MFB :: grid Rokhas 3.0 Home page      */
    /********************************************************/
      
      
    <screen labelWidth="80" label="My Dashboard" noToolBar="true">      
        <script postLoad="true">
             var currentFocus;
                
      document.getElementsByClassName("ow-field-input")[2].addEventListener("input", function () {
                    var a, b, i;
                    var inp = document.getElementsByClassName("ow-field-input")[2];
                    var val = inp.value.toLowerCase();
                    if (!val) {
                        closeAllLists();
                        return false;
                    }
                    console.log(val);
                    currentFocus = -1;
                    //close any already open lists of autocompleted values
                    closeAllLists();
                    restAutoComplete(inp,val,true);
      });
                
                
      document.getElementsByClassName("ow-field-input")[2].addEventListener("keydown", function (e) {
                    var x = document.getElementById("autocomplete-list");
                    if (x) x = x.getElementsByTagName("div");
                    moveKey(e,x,0);
      });
                
      document.getElementsByClassName("second-search-bar")[0].getElementsByTagName("input")[0].addEventListener("input", function () {
                    var a, b, i;
                    var inp = this;
                    var val = inp.value.toLowerCase();
                    if (!val) {
                        closeAllLists();
                        return false;
                    }
                    currentFocus = -1;
                    //close any already open lists of autocompleted values
                    closeAllLists();
                    restAutoComplete(inp,val,false);
      });
                
                
    document.getElementsByClassName("second-search-bar")[0].getElementsByTagName("input")[0].addEventListener("keydown", function (e) {
        var x = document.getElementById("autocomplete-list");
     if (x) x = x.getElementsByTagName("div");
        moveKey(e,x);
    });
                
    document.getElementsByClassName("back-span")[0].addEventListener("click",function(){
          document.getElementsByClassName("ow-field-input")[2].value=""; 
          $(".divSearchBar").show();
          $(".searchList").hide();
    });
            
    $(".searchList .second-search-bar i.fa-eraser").click(function(){
	  $(".searchList .second-search-bar input").val("");
   });

    $(".searchList .second-search-bar i.fa-search").click(function(){
        getTimeCounter();
        closeSearchList();
        currentPage=0;
       restSearchList($(".searchList .second-search-bar input").val(),0); 
    });
       
       
    $(".divSearch .divSearchBar .t1").click(function(){
       ApplicationManager.run("karaz/ux/hub/portailsearch/search/AcceptabiliteProjets", "search", "Acceptabilite Projets", {});
    });
        
    $(".divSearch .divSearchBar .t2").click(function(){
       ApplicationManager.run("karaz/ux/hub/portailsearch/search/AccesAuFoncier", "search", "Acces Au Foncier", {});
    });    
         
    $(".Header-signup .Header-signup-logo .Header-signup-min .menu-bar-icon i").click(function(){
        $(".header-div-toggle").toggle("fast"); 
    });         
          
        </script>
        <vbox columns="20% 80%" className="Header-signup" columns-small="auto">
            <vbox className="Header-signup-logo">
                <html className="Header-signup-glo">
                    <div class="rokhas-home" style="margin-left: 50px;">
                        <img src="./img/rokhasRectBlueArFr.svg" style="height:45px;" />
                    </div>
                </html>
                <vbox className="Header-signup-min" columns="20% 60% 20%" columns-small="20% 60% 20%">
                    <html className="menu-bar-img">
                        <img src="web/css/img/LogoSquare.svg" alt="" />
                    </html>
                    <html />
                    <html className="menu-bar-icon">
                        <i class="fas fa-bars" />
                    </html>    
                </vbox>
            </vbox>
            
            <vbox columns="60% 25% 15%" className="header-div-toggle">
               <vbox className="header-menu" columns="20% 19% 19% 19% 19% 8%">
                   <button label="Actualités">
                        <postChange>

                        </postChange>
                   </button>
                   <button label="Simulateur">
                        <postChange>
                            ApplicationManager.run("karaz/ux/hub/portailsearch/search/AllKarazuxresults?query.search=activité&amp;query.parentP=0", "search", "All Karazuxresults", {});
                        </postChange>
                   </button>
                    <button label="Open data">
                        <postChange>
                            ApplicationManager.run("karaz/ux/hub/portailsearch/search/PublicCentralSearch","search", "PublicCentralSearch", {});
                        </postChange>
                   </button>
                   <button label="Solutions">
                        <postChange>

                        </postChange>
                   </button>
                   <button label="Ressources">
                        <postChange>

                        </postChange>
                   </button>
                   <button icon="far fa-question-circle">
                       <postChange />
                   </button>
                   <vbox columns="50% 50%">
                   <button className="butt-otm" label="OTM"> <postChange>ApplicationManager.run("karaz/ux/hub/portailsearch/search/OpinionTextMining", "search", "PublicCentralSearch", {});
                       </postChange>
                   </button>
                    <button className="butt-otm" label="OTC"> <postChange>ApplicationManager.run("karaz/ux/hub/portailsearch/search/OpinionTextClassification", "search", "OpinionTextClassification", {});
                       </postChange>
                   </button>
                   </vbox>    
            
                </vbox>

                <vbox className="vbox-button-signup-header" columns="50% 50%">
                    <button label="Inscription" className="button-signup-header button-left">	
                        <postChange>
                                ApplicationManager.run('karaz/signup/gestioncompte/search/FormSignupSearch?step=step2','search','search',{});
                        </postChange>						
                    </button>
                    <button label="Connexion" className="button-signup-header">	
                        <postChange>
                                ApplicationManager.run('karaz/signup/gestioncompte/search/FormSignupSearch?','search','search',{});
                        </postChange>					
                    </button>
                </vbox>
                <vbox className="vbox-button-signup-header" columns="50% 50%">
                    <button label="FR" className="button-signup-header-cliked button-left">						
                    </button>
                    <button label="ع" className="button-signup-header">						
                    </button>
                </vbox>
            </vbox>
        </vbox>

        <html id="hSeparator">
            <div style="height: 30px;"> </div>
        </html>        
           
        <vbox columns="30% 70%">
           <vbox>
            <vbox className="hp-box last-log">
                <vbox columns="20% 80%">
                    <html>
                        <div class="hp-box-icon fas fa-user" />
                    </html>
                    <html>
                        <div class="hp-box-small-title"> Accédez à votre espace privé</div>       
                    </html>    
                </vbox>
                <html>
                    <div style="height: 10px;"> </div>
                </html>                
                <vbox>
                    <field widget="text" className="hp-text-input" xpath="userLogin" emptyText="Nom utilisateur" noLabel="true" width="80%">
                        <bag position="leading" className="hp-bag-input fas fa-user" />
                        <validation type="required" errorMessage="Veuillez saisir votre nom d'utilisateur !" />
                    </field>
                    <field widget="password" className="hp-text-input" xpath="userPassword" postEnter="x=$('.HomePageLoginButton').click()!!expr!!string" separator="!!" emptyText="Mot de passe" noLabel="true" height="100">
                        <bag position="leading" className="hp-bag-input fas fa-lock" />
                        <validation type="required" errorMessage="Veuillez saisir votre mot de passe !" />
                    </field>

                    <button className="hp-box-btn HomePageLoginButton buttonLog" label="Se connecter">
                        <postChange>
                            <!--  Routing credentials check depending to authentication domain (@rokhas / @casaurba)-->
                            let myUrl='kas/signin';
                            //let uri='http://37.59.82.23:8080/karazal';
                            let uri='http://preprodrokhas.karaz.org:8080/karazal';                            
                            let myDomain = 'karaz';
                            let myLogin = root.userLogin;
                            let myPassword = root.userPassword;             
                            
                            myDomain = myLogin.split('@')[1];
                                        
                            switch(myDomain) {                           
                              case 'casaurba' :
                                uri='https://www.casaurba.ma/karazortal';
                                myUrl = uri+'/kas/signin';
                                Toaster.push({title: "Authentification", position: "top_center", message: "Authentification reussie. Vous allez être connecté au service Casaurba.", type:"success", duration:-1});
                                window.location.replace(uri+"/index.jsp");
                                break;
                              case 'casaurba.ma':
                                uri='https://www.casaurba.ma/karazortal';
                                myUrl = uri+'/kas/signin';
                                Toaster.push({title: "Authentification", position: "top_center", message: "Authentification reussie. Vous allez être connecté au service Casaurba.", type:"success", duration:-1});   
                                break;
                              case 'rokhas.ma':
                                uri='https://www.rokhas.ma/karazortal';
                                myUrl = uri+'/kas/signin';
                                Toaster.push({title: "Authentification", position: "top_center", message: "Authentification reussie. Vous allez être connecté au service Rokhas.", type:"success", duration:-1});    break;                                
                              default:
                                myUrl = 'kas/signin';
                            }
                            
                        
                            // Ajax's call to user authentication service
                            
                            $.ajax({
                            
                               type: "POST",
                            
                               url: myUrl,

                               data: {
                                   "j_username" : myLogin,
                                   "j_password": myPassword,
                               },
                            
                               success: function (result) {
                               
                               if (result.trim().startsWith('<!-- xxx  -->')){
															Toaster.push({title: "Erreur d'athentification", position: "top_center", message: "Nom d'utilisateur ou mot de passe incorrects. Veuillez réessayer ...", type:"error", duration:-1});
																		 }
							    else {
                                    Toaster.push({title: "Routage", position: "top_center", message: "Votre authentification s'est bien déroulée !", type:"success", duration:-1});                            
                                    window.location.replace(uri+"/index.jsp");}
                               },
                            
                               error: function (err) { 
                                    Toaster.push({title: "Erreur d'athentification", position: "top_center", message: "Nom d'utilisateur ou mot de passe incorrects. Veuillez réessayer ...", type:"error", duration:-1});
                                    console.log("error on isOn" + err, err); 
                                
                                }
                            });   
                            
                        </postChange>                                  
                    
                    </button>
                </vbox>
                <vbox>
                    <html>
                        <div style="height: 10px;" />
                        <div class="hp-sbox-text">
                            <i class="fas fa-user-plus"></i> <a onclick="javascript:ApplicationManager.run('karaz/signup/gestioncompte/search/FormSignupSearch?step=step2','search','search',{});">Pas encore de compte Rokhas ?</a>
                        </div>                             
                        <div class="hp-sbox-text">
                            <a><i class="fas fa-user-times" /> Mot de passe oublié ?</a>
                        </div>
                        <div style="height: 10px;"> </div>                                                                  
                    </html>
                </vbox>
                
            </vbox>
            <vbox className="hp-box last-log">
                <vbox columns="20% 80%">
                    <html>
                        <div class="hp-box-icon fas fa-folder" />
                    </html>
                    <html>
                        <div class="hp-box-small-title"> Etat d'avancement dossier</div>       
                    </html>    
                </vbox>
                <html>
                    <div style="height: 10px;"> </div>
                </html>                
                <vbox>
                    <field widget="text" className="hp-text-input" xpath="demandeId" emptyText="Votre N° de demande" noLabel="true" width="80%">
                        <bag position="leading" className="hp-bag-input fas fa-folder-open" />
                        <validation type="required" errorMessage="Veuillez saisir votre N° de demande !" />
                    </field>
                    <field widget="text" className="hp-text-input" xpath="CIN" postEnter="" separator="!!" emptyText="Votre N° de CIN ou N° RC" noLabel="true" height="100">
                        <bag position="leading" className="hp-bag-input fas fa-address-card" />
                        <validation type="required" errorMessage="Veuillez saisir votre N° de CIN ou N° RC !" />
                    </field>

                    <button className="hp-box-btn HomePageLoginButton buttonLog" label="Vérifier">
                        <postChange>  
                        </postChange>                                  
                    </button>
                </vbox>
            </vbox>
            
            
            </vbox>
            
        <vbox className="hp-box hp-small divSearch height-973">
                <vbox className="hp-box divSearchBar">
                    <html>
                        <div class="hp-sbox-big-title">
                            Pont de confiance Usager / Administration
                        </div>
                        <div class="hp-sbox-text">
                            Un parcours d'autorisation 100% digital, 100% traçable avec Zéro papier déposé et Zéro papier délivré.
                        </div>
                        <div style="height: 50px;" />
                    </html>    
                    <vbox columns="80% 20%" columns-small="80% 20%" contentAlign="center">
                        <field className="hp-search_field" label="" xpath="query.keys" widget="text" emptyText="Recherche par activité. Exemple : peinture, boulangerie, aluminium, ...">
                        </field>
                        <button className="hp-search_field_icon fas fa-search search_button" label="" postProcessing="search()" separator="!!">
                            <postChange>
                                prefix= $(".hp-search_field input").val();
                                ApplicationManager.run("karaz/ux/hub/portailsearch/search/AllKarazuxresults?query.search="+prefix+"&amp;query.parentP=0", "search", "All Karazuxresults", {});
                            </postChange>
                        </button>
                    </vbox>
                    <html className="link-div-ref">
                        <a>Référentiel des activités</a>
                    </html>

                    <html>
                        <div style="height: 70px;"> </div>
                    </html>        

                        <vbox columns="66% 34%" className="div-main-icons">
                           <html>
                               <div class="main-icon-title-bx t1">
                                   <div class="title">
                                       Quelle demande déposer ?
                                   </div>
                                   <div class="par">
                                    <i class="fas fa-map-signs" />     
                                   <span>Répondez à quelques questions pour être mieux orienté.</span>
                                   <button class="main-icon-button">
                                       DÉMARRER SIMULATION
                                   </button>
                                   </div>
                                   
                               </div>
                           </html>
                           <vbox>
                           <html>
                               <div class="main-icon-title t3">
                                   <div style="display:grid;grid-template-columns:15% 85%">
                                        <i class="fas fa-map-marker-alt" />
                                       <span>Autorisations urbanistiques</span>
                                    </div>
                               </div>
                           </html>
                           <html>
                               <div style="height:25px" />
                           </html>
                           <html>
                               <div class="main-icon-title t4">
                                   <div style="display:grid;grid-template-columns:15% 85%">
                                        <i class="fas fa-cog" />
                                        <span>Autorisations économiques</span>
                                    </div>
                               </div>
                           </html>
                           </vbox>
                        </vbox>
                        <vbox columns="40% 0% 40% 13%" className="support"> 
                            <html className="support-html">
                                <i class="fas fa-paper-plane" />
                                <span>Support@rokhas.ma</span>
                            </html>
                            <html>
                                
                            </html>
                            <html className="support-html">
                                <i class="fas fa-phone" />
                                <span>+212 (0) 5 22 23 23 44</span>
                            </html>
                            <html className="support-time">
                                <span style="font-size:12px;">08:30 à 18:30</span>
                            </html>
                        </vbox>
                    </vbox>

                <html>
                    <div class="searchList">
                       <div class="second-search-bar">
                           <span class="back-span"><i class="fas fa-chevron-left" /> Retour</span>
                           <input type="text" /><i class="fas fa-eraser" /><i class="fas fa-search" />
                       </div>
                        <p class="nbrRes">Environs <span>0</span> résultats (<span>0.21</span> second)</p>
                        <div class="searchListD">
                            <div class="searchGif">
                                <img src="img/search-move.gif" />
                            </div>
                        </div>
                        <div class="pagination">

                        </div>
                    </div>
                </html>    
            </vbox>    
        </vbox>
            
		<html> <div style="height: 30px;"> </div> </html>                
        
        <html>
            <cms-topicTitle>COMMENT CA MARCHE ?</cms-topicTitle>
            <cms-topicSeparator />
        </html>
        

        <vbox columns="20% 20% 20% 20% 20%">
             <html>                
                <box-card style="    height: 210px !important;">
                    <html><span class="main-number">1</span></html>
                    <box-small-title>Créer votre espace privé sur rokhas.ma</box-small-title>
                    <button class="main-btn">Procéder</button>
                </box-card>
             </html>                

             <html>                
                <box-card style="    height: 210px !important;">
                   <html><span class="main-number">2</span></html>
                    <box-small-title>Saisissez votre demande en ligne</box-small-title>
                </box-card>
             </html>
            
             <html>                
                <box-card style="    height: 210px !important;">
                    <html><span class="main-number">3</span></html>
                    <box-small-title>Attachez vos pièces justificatives</box-small-title>
                </box-card>
             </html>
            
             <html>                
                <box-card style="    height: 210px !important;">
                    <html><span class="main-number">4</span></html>
                    <box-small-title>Suivez le traitement du dossier en ligne
                    </box-small-title>
                              
                </box-card>
             </html> 
             <html>                
                <box-card style="    height: 210px !important;">
                    <html><span class="main-number">5</span></html>
                    <box-small-title>Recevez votre document e-signé</box-small-title>
                </box-card>
             </html>            
            
          </vbox>
          
          <html> <div style="height: 30px;"> </div> </html>                
        
        <html>
            <cms-topicTitle>RESSOURCES PRATIQUES</cms-topicTitle>
            <cms-topicSeparator />
        </html>
        

        <vbox columns="25% 25% 25% 25%">
             <html>                
                <box-card style="height:178px">
                    <box-icon class="fas fa-video h-icon"> </box-icon>
                    <box-big-title>Guides vidéos</box-big-title>
                </box-card>
             </html>                

             <html>                
                <box-card style="height:178px">
                    <box-icon class="fas fa-question-circle h-icon"> </box-icon>  
                    <box-big-title>Questions fréquentes</box-big-title>
                                          
                </box-card>
             </html>
            
             <html>                
                <box-card style="height:178px">
                    <box-icon class="fas fa-gavel h-icon"> </box-icon>  
                    <box-big-title>Réglementation</box-big-title>                      
                </box-card>
             </html>
            
             <html>                
                <box-card style="height:178px">
                    <box-icon class="fas fa-download h-icon"> </box-icon>  
                    <box-big-title>Téléchargements</box-big-title>
                </box-card>
             </html>            
            
          </vbox>
        
		  <html> <div style="height: 30px;"> </div> </html>            
        
        <html>
            <cms-topicTitle>Chiffres clés</cms-topicTitle>
            <cms-topicSeparator />
        </html>
        

        <vbox columns="25% 25% 25% 25%">
             <html>                
                <box-card class="card-bx">
                    <box-icon class="fas fa-university"> </box-icon>
                    <box-big-title>121</box-big-title>
                    <box-small-title>Commune</box-small-title>
                    <box-h-sep> </box-h-sep>
                    <box-text><a>Couverture géographique <i class="fas fa-external-link-alt"></i></a></box-text>                    
                </box-card>
             </html>                

             <html>                
                <box-card class="card-bx">
                    <box-icon class="fas fa-folder"> </box-icon>  
                    <box-big-title>+300</box-big-title>
                    <box-small-title>Dossier traité / jour</box-small-title>
                    <box-h-sep> </box-h-sep>
                    <box-text><a>Performance par commune <i class="fas fa-external-link-alt"></i></a></box-text>                      
                </box-card>
             </html>
            
             <html>                
                <box-card class="card-bx">
                    <box-icon class="fas fa-user-tie"> </box-icon>  
                    <box-big-title>+900</box-big-title>
                    <box-small-title>Fonctionnaire</box-small-title>
                    <box-h-sep> </box-h-sep>
                    <box-text><a>Accèder à l'espace d'échange <i class="fas fa-external-link-alt"></i></a></box-text>                      
                </box-card>
             </html>
            
             <html>                
                <box-card class="card-bx">
                    <box-icon class="fas fa-users"> </box-icon>  
                    <box-big-title>+10000</box-big-title>
                    <box-small-title>Utilisateur</box-small-title>
                    <box-h-sep> </box-h-sep>
                    <box-text><a>Question fréquentes <i class="fas fa-external-link-alt"></i></a></box-text>                       
                </box-card>
             </html>            
            
          </vbox>
      <html> <div style="height: 30px;"> </div> </html>            

        
        
    </screen>
        
    /********************************************************/
    /*      END :: #MFB :: grid Rokhas 3.0 Home page        */
    /********************************************************/ 
   
  </view>
</search>
