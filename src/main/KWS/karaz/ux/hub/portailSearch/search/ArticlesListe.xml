<?xml version="1.0" encoding="UTF-8"?>
<search name="ArticlesListe" label="Liste d'articles">
  <query />
  <data>
    <query>
      <search />
      <idObject />
      <typeArticle />
      <text />
      <parentP />
    </query>
    <collapsed>false</collapsed>
  </data>
  <view transContext="portailSearch">

        <component name="htmlTranslate">
            <renderer name="articles">
                <html>
                    <div class="vpanel-title">
                        <div class="vpanel-title">
                        <span style="cursor:pointer" onclick="javascript:ApplicationManager.run('karaz/ux/hub/portailsearch/search/Articles','search','Articles',{});">${code1 | translate} |
                            <span class="cl-orange title-2x">${code2 | translate}</span></span>
                        <hr class="header-create-account-horizontal-line hr-hub" />
                        </div>
                    </div>
                    <div class="hp-sbox-text">
                        ${code3 | translate}
                    </div>
                    <div style="height: 50px;" />
                </html>
            </renderer>

            <renderer name="searchGif">
                <html>
                    <div class="searchGif">
                        <img src="img/search-move.gif" />
                    </div>
                    <div class="no-result-v" style="display:none;line-height: 100px;">
                            ${code | translate}
                    </div>
                    <div class="full-search-list" />
                    <div class="pagination pagination-second" />
                </html>
            </renderer>

            <renderer name="fieldSet">
                <fieldset header="${header1 | translate}" collapsible="false" className="div-det-acc PCD-addtitle pcd-ha-color det-article-fieldset ">
                    <!-- start modification -->
                    <html>
                        <div class="">
                        <ul class="article-categorie" style="list-style: none;text-align: center;padding: 0px 0px;font-size: 13px;color: #777;margin:auto;margin-top: 20px;margin-bottom: 20px;">
                            <li class="li-1" style="cursor:pointer;margin-right:4px;display:inline-block">${code1 | translate} <span style="color:#f90" /> | </li>
                            <li class="li-2" style="cursor:pointer;margin-right:4px;display:inline-block">${code2 | translate} <span style="color:#f90" /> | </li>
                            <li class="li-3" style="cursor:pointer;margin-right:4px;display:inline-block">${code3 | translate} <span style="color:#f90" /> </li>
                            <li class="li-4" style="cursor:pointer;margin-right:4px;display:inline-block">${code4 | translate} <span style="color:#f90" /> </li>
                        </ul>
                        </div>
                    </html>

                    <fieldset header="${header2 | translate}" className="NFQ-quest-title NFQ-type-plat ">
                        <html>
                        <div class="NFQ-quest-type-recent NFQ-fieldset">
                            <!-- Les questions s'affiche ici                                  -->
                        </div>
                        </html>
                    </fieldset>
                    
                    <fieldset header="${header3 | translate}" className="NFQ-quest-title NFQ-type-general ">
                        <html>
                        <div class="NFQ-quest-type-popular NFQ-fieldset">
                            <!-- Les questions s'affiche ici                                  -->
                        </div>
                        </html>
                    </fieldset>
                    
                    <fieldset header="${header4 | translate}" className="NFQ-quest-title NFQ-type-document ">
                        <html>
                        <div class="NFQ-quest-type-liked NFQ-fieldset">
                            <!-- Les questions s'affiche ici                                  -->
                        </div>
                        </html>
                    </fieldset>
                    <!-- end modification -->
                    </fieldset>
            </renderer>

        </component>
    <screen labelWidth="80" label="My Dashboard" noToolBar="true" transContext="portailSearch" supportLangRedirection="true">

      <script onLoad="true">
                try{
                    root.userlang=userLocal;
                    context.formRender.notifyObservers("userlang");
                }catch(e){
                    console.log("ERROOOR",e);
                }
            </script>

      <script postLoad="true">
      getCountArticles("classSearch-80");
      removeFullListSearch("classSearch-80",context.formRender.targetPanel);
      if(root.userlang=="fr"){
        if(root.query.typeArticle==""){
          context.formRender.targetPanel.find(".classSearch-80 .vpanel-title .title-2x").html("TOUS");
        }else if(root.query.typeArticle==1){
          context.formRender.targetPanel.find(".classSearch-80 .vpanel-title .title-2x").html("PRATIQUE");
        }else if(root.query.typeArticle==2){
         context.formRender.targetPanel.find(".classSearch-80 .vpanel-title .title-2x").html("A LA UNE");
        }else if(root.query.typeArticle==3){
          context.formRender.targetPanel.find(".classSearch-80 .vpanel-title .title-2x").html("REVUE DE PRESSE");
        } 
      }
      if(root.userlang=="ar"){
        if(root.query.typeArticle==""){
          context.formRender.targetPanel.find(".classSearch-80 .vpanel-title .title-2x").html("الكل");
        }else if(root.query.typeArticle==1){
          context.formRender.targetPanel.find(".classSearch-80 .vpanel-title .title-2x").html("مناسب");
        }else if(root.query.typeArticle==2){
         context.formRender.targetPanel.find(".classSearch-80 .vpanel-title .title-2x").html("إلى الرئيسية");
        }else if(root.query.typeArticle==3){
          context.formRender.targetPanel.find(".classSearch-80 .vpanel-title .title-2x").html("قراءة في الصحافة");
        } 
      }    
          profilesT = profiles;
          
            
            PCD_headerfieldset_color(".NFQ-quest-title");
            context.formRender.targetPanel.find(".NFQ-quest-title .ow-label-pl").css('text-transform','upperCase');
               
            PCD_header_style_quest_type(".NFQ-type-document" , "fas fa-heart")
            PCD_header_style_quest_type(".NFQ-type-plat" , "fas fa-clock")
            PCD_header_style_quest_type(".NFQ-type-general" , "fas fa-eye")
            PCD_header_style_quest_type(".NFQ-type-adminis" , "fas fa-heart")

            // header color
            PCD_headerfieldset_color(".pcd-ha-color");

            RestSearchArticleSec("", 0, 3, [""], 3, [".det-article-fieldset .NFQ-quest-type-recent",".det-article-fieldset .NFQ-quest-type-popular",".det-article-fieldset .NFQ-quest-type-liked"],0,"classSearch-80",context.formRender.targetPanel,root)

            context.formRender.targetPanel.find(".classSearch-80 .article-categorie .li-1").click(function(){
                getAllArticlesByType("",0,false,0,"classSearch-80",root,context);
            });

            context.formRender.targetPanel.find(".classSearch-80 .article-categorie .li-2").click(function(){
                getAllArticlesByType("",0,false,1,"classSearch-80",root,context);
            });

            context.formRender.targetPanel.find(".classSearch-80 .article-categorie .li-3").click(function(){
                getAllArticlesByType("",0,false,2,"classSearch-80",root,context);
            });

            context.formRender.targetPanel.find(".classSearch-80 .article-categorie .li-4").click(function(){
                getAllArticlesByType("",0,false,3,"classSearch-80",root,context);
            });

        </script>
        <script postLoad="true" delay="200">

            context.formRender.targetPanel.find(".classSearch-80 .div-full-search-bar .ow-field-input").get(0).addEventListener("keydown", function (e) {
                    var x =  document.querySelector(".classSearch-80 #autocomplete-list");
                    if (x) x = x.getElementsByTagName("div");
                    moveKey(e,x,1,"classSearch-80");
            }); 

            context.formRender.targetPanel.find(".classSearch-80 .div-full-search-bar .ow-field-input").get(0).addEventListener("input", function () {
                    var a, b, i;
                    var inp = this;
                    var val = inp.value.toLowerCase();
                    if (!val) {
                        closeAllLists();
                        return false;
                    }
                    console.log(val); 
                    currentFocus = -1;
                    //close any already open lists of autocompleted values
                    closeAllLists();
                    restAutoComplete2(inp,val,"articles_index","title"); 
            });

            context.formRender.targetPanel.find(".classSearch-80 .searchbuttun").click();
        </script>
      <html id="hSeparator">
        <div style="height: 0px;" />
      </html>
      <vbox columns="70% 30%" className="classSearch-80 search-article">
        <vbox className="hp-box hp-small divSearch">
          <vbox className="hp-box divSearchBar div-full-search-bar">
            <htmlTranslate renderer="articles" code1="AC00" code2="TOUS" code3="Art-Text" />
            <vbox columns="80% 20%" className="stay-grid" columns-small="80% 20%" contentAlign="center">
              <field className="hp-search_field" label="" xpath="query.text" widget="text" emptyText="Saisissez vos mots clés ici" />
              <button className="hp-search_field_icon fas fa-search searchbuttun search_button" label="" postProcessing="search()" separator="!!">
                <postChange>
                    var prefix = root.query.text;
                    var prefix = context.formRender.targetPanel.find(".classSearch-80 .div-full-search-bar .hp-search_field input").val();
                    currentPage=0;
                    var pp = root.query.typeArticle;
                    if(pp==""){
                        pp=0;
                    }
                    restFullSearchList(prefix,0,false,pp,"classSearch-80",context.formRender.targetPanel);
                    root.query.parentP=0;
                </postChange>
              </button>
            </vbox>
            <html>
              <div style="height: 30px;" />
            </html>
            <htmlTranslate renderer="searchGif" code="ARTEMC00" />
          </vbox> 
        </vbox>
        <htmlTranslate renderer="fieldSet" header1="AC00" header2="LPR00" header3="LPP00" header4="LPA00" code1="TA00" code2="PQ00" code3="ALU00" code4="RDP00" />
      </vbox>
      <html>
        <div style="height: 30px;" />
      </html>
    </screen>
  </view>
</search>
