<?xml version="1.0" encoding="UTF-8"?>
<search name="GuideVideoConsultation" label="Guide Video Consultation">
  <query />
  <data>
    <query>
      <search />
      <idObject />
      <parentP />
      <filterRef>Tous</filterRef>
    </query>
    <collapsed>false</collapsed>
  </data>
  <view transContext="portailSearch">

    <component name="htmlTranslate">

      <renderer name="panelTitle">
        <html>
          <div class="vpanel-title">
            <div class="vpanel-title">
            <span style="display:grid;grid-template-columns:50% 50%">
              <span>${code1 | translate}</span>
              <span style="text-align:right;color:#38A;cursor:pointer;font-size:13px" onclick="showListVideo('classSearch-7')">${code2 | translate}</span>
            </span>
              <hr class="header-create-account-horizontal-line hr-hub" />
            </div>
            <div class="hp-sbox-text">
              ${code3 | translate}
            </div>
          </div>
        </html>
      </renderer>
    
      <renderer name="searchVideo">
        <html className="search-video">
          <div class="searchGif">
            <img src="img/search-move.gif" />
          </div>
          <div class="full-search-list" />
          <div class="no-result-v" style="display:none;height: 500px;">
            ${code | translate}
          </div>
          <div class="pagination pagination-second" />
        </html>
      </renderer>
    
      <renderer name="consulationVideo">
        <html className="consultation-video">
          <span class="consultation-video-title">${code1 | translate}</span>
          <div class="video-iframe">
            <iframe src="https://player.vimeo.com/video/241206308?rel=0" width="100%" height="100%" frameborder="0" />
          </div> 
          <div class="video-description">${code2 | translate}</div>
          <div class="next-prev" columns="50% 50%">
            <div class="prev-video" style="">
              <i class="fas fa-chevron-left" />
              <span class="">${code3 | translate}</span>
            </div>
            <div class="next-video" style="">
              <span class="">${code4 | translate}</span>
              <i class="fas fa-chevron-right" />
            </div>
          </div>
        </html>
      </renderer>
    
    </component>
    <screen labelWidth="80" label="My Dashboard" noToolBar="true" transContext="portailSearch" supportLangRedirection="true">

      <script onLoad="true">
              try{
                  root.userlang=userLocal;
                  context.formRender.notifyObservers("userlang");
              }catch(e){
                  console.log("ERROOOR",e);
              }
          </script>
      <script postLoad="true">
            profilesT=profiles;
            getAllplayLists(2,1000,"classSearch-7",context.formRender.targetPanel);
            $(".classSearch-7 .searchbuttun").click();

            Array.from(document.querySelectorAll(".classSearch-7 .divSearchBar .hp-search_field input")).forEach(function(elm){
                autoCompleteSim(elm,"videos_index","title");
                Array.from(document.querySelectorAll(".classSearch-7 .div-full-search-bar .ow-field-input")).forEach(function(elm){
                elm.addEventListener("keydown", function (e) {
                    var x = document.querySelector(".classSearch-7 #autocomplete-list");
                    if (x) x = x.getElementsByTagName("div");
                    moveKey(e,x,1,"classSearch-7");
                })
                });
            });</script>
      <html id="hSeparator">
        <div style="height: 30px;" />
        <style>
          .classSearch-7 .hp-search_field .ow-field-input-line{
            border-right: none;
            border-radius: 15px 0 0 15px
          }
  
          .classSearch-7 .filterRef-class .ow-field-input-line{
              height: 32px;
              border-radius: 0 15px 15px 0;
              border: 4px solid #3388aa;
              overflow: hidden;
              background: #38A
          }
  
          .hp-search_field .ow-field-input-side,.filterRef-class .ow-field-input-side{
            padding : 0px;
          }
  
          .filterRef-class .ow-field-input-select{
                color: #fff !important;
                background: #38A !important;
                font-size: 16px;
                line-height: 21px !important;
          }
  
          .filterRef-class .ow-field-input-select:before{
            color:#fff !important;
            line-height: 24px !important;
          }
   
          .filterRef-class .ow-field-assistance{
            text-align: left;
          }

          .filterRef-class .ow-field-input-select{
            font-size: 13px;
            font-size: 1vw !important;
            padding-top: 6px;
            padding-right: 5px;
            padding-left: 0;
          }
  
          </style>
      </html>
      <vbox columns="70% 30%" className="classSearch-7">
        <vbox className="hp-box hp-small divSearch">
          <vbox className="hp-box divSearchBar div-full-search-bar">
            <htmlTranslate renderer="panelTitle" code1="GVC00" code2="GVC01" code3="GVC02" />
            <vbox columns="80% 20%" className="stay-grid" columns-small="80% 20%" contentAlign="center">
              <vbox columns="68% 32%">
                <field className="hp-search_field search-video-input" label="" xpath="query.search" widget="text" emptyText="Rechercher une vidéo" />
                <field className="filterRef-class" widget="select" xpath="query.filterRef">
                  <option value="Tous" label="Tous" />
                  <option value="ROKHAS ECONOMIQUE" label="Rokhas économique" />
                  <option value="ROKHAS URBANISTIQUE" label="Rokhas urbanistique" />
                  <option value="Général" label="Général" />
                  <option value="Karaz GIS" label="Karaz GIS" />
                  <postChange>
                      context.formRender.targetPanel.find(".classSearch-7 .searchbuttun").click(); 
                  </postChange>
                </field>
              </vbox>
              <button className="hp-search_field_icon fas fa-search searchbuttun search_button" label="">
                <postChange>
                  var prefix = $(".classSearch-7 .div-full-search-bar .search-video-input input").val();
                  currentPage=0;
                  $(".classSearch-7 .consultation-video").hide();
                  $(".classSearch-7 .search-video").show();
                  if(root.query.filterRef=="Tous"){
                    var pp = 0;
                  }else{
                    var pp = root.query.filterRef;
                  }
                  restFullSearchList(prefix,0,false,pp,"classSearch-7",context.formRender.targetPanel);
                </postChange>
              </button>
            </vbox>
            
            <html>
              <div style="height: 30px;" /> 
            </html>
            <htmlTranslate renderer="searchVideo" code="GVC03" />
            <html class="loadGifVid">
              <div class="searchGif2">
                <img src="img/load-text.gif" />
              </div>
            </html>
            <htmlTranslate renderer="consulationVideo" code1="GVC04" code2="GVC05" code3="GVC06" code4="GVC07" />
          </vbox>
        </vbox>
        <fieldset label="VIDÉOS DIDACTIQUES RÉCENTES" collapsible="false" className="div-det-acc PCD-addtitle pcd-ha-color NQF-freq-quest v-consultation" />
      </vbox>
      <html>
        <div style="height: 30px;" />
      </html>
    </screen>
  </view>
</search>
