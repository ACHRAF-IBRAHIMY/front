<?xml version="1.0" encoding="UTF-8"?>
<search name="DashletsArchitectSearch" label="DashletsArchitectSearch">
	<query>
	</query>
	<data>
		<query>
			<keys />
			<model />
			<from />
			<to />
			<task>true</task>
			<object>true</object>
			<document>true</document>
			<annotation>true</annotation>
			<others>true</others>

			<userLogin />
			<userPassword />
           <unifiedCriteria /> 
            <searchModel>
              <searchQN>cug/cri/urbanisme/autorisation/search/PermisConstruireSerachGlobal</searchQN>
              <searchQN />
            </searchModel> 
			<tos />
		</query>
	</data>
	<view>
		<screen id="dashboardMain" noToolBar="true">
<script onLoad="true">
	var userData = $.parseXML( karazDataUserXml );
    var   $xml = $(userData);
    var email =$xml.find('email').text();
	root.query.tos=email;
	context.formRender.notifyObservers("query.tos");

	console.log('email==',query.tos);

</script> 
			<vbox id="dashboardArchitect" columns="72% 28%">

				<!-- <vbox id="blinkSearch" columns="20% auto" height="300px"> -->
				<!-- search criterias -->
				<vbox>
					<framedPanel label="Taches a faire" id="taskTodo" collapsible="false">
						<vbox label="Résultat de recherche">
							<vbox columns="33% 33% 33%">
								<vbox />
								<vbox />
								<html>
									<div class="ow-thumbnail-action  fas fa-cogs" onclick="ApplicationManager.run('karaz/ux/hub/portailsearch/search/AllGlobalTAskSearch', 'search', 'Toutes les tâches')" style="width: 300px;margin-left: 49%;">
										Toutes les tâches
									</div>
								</html>
							</vbox>
							<vbox>
 
							<search searchQN="karaz/ux/hub/portailsearch/search/AllTaskGlobalModelSearch?query.returnMode=manualTask&amp;pageSize=3&amp;limit=3" /> 
                            </vbox>
                     	</vbox>
					</framedPanel>
					<framedPanel label="Dossiers en cours de traitement" collapsible="false">
                      <vbox>
               
                              <search searchQN="karaz/ux/hub/portailsearch/search/AllObjectGlobalModelSearch?query.returnMode=DataObject&amp;pageSize=3&amp;limit=3&amp;isforMe=true&amp;query.draftStatus=Brouillon&amp;query.rejectStatus=Rejeté" />
                      </vbox>
                         			</framedPanel>

					<framedPanel label="Indicateurs de performance" collapsible="false">

					</framedPanel>
					<framedPanel label="Astuces, conseils et et nouvelles fonctionnalités" collapsible="false">

					</framedPanel>
				</vbox>

				
				<vbox label="">
					<fieldset label="Notifications" collapsible="false">
						<html style="display: flex; justify-content: flex-end; height: 0px;">
							<span class="fs-tooltip">
	                            <div>
	                               <span class="fs-tooltiptext" style="width: max-content; z-index: 10; transform: translate(-170px,-62px); padding: 0 9px;" tooltip-content-before="Toutes les Notifications ">                                          
	                               </span>
	                               <span class="fs-item-bag fas fa-envelope" style="transform: translateY(-39px); font-size: 22px;" onclick="ApplicationManager.run('notify/email/search/AllnotificationEmail?limit=3&amp;loadXml=true&amp;query.tos=${query.tos}', 'search', 'Les Notifications Archivées')" />
	                            </div>
	                    	</span>
	                    	<span class="fs-tooltip">
	                            <div>
	                               <span class="fs-tooltiptext" style="width: max-content; z-index: 10; transform: translate(-170px,-62px); padding: 0 9px;" tooltip-content-before="Notifications Lues ">                                          
	                               </span>
	                               <span class="fs-item-bag fas fa-envelope-open" style="transform: translateY(-39px); font-size: 22px;" onclick="ApplicationManager.run('notify/email/search/AllnotificationEmail?limit=3&amp;query.emailState=Lu&amp;loadXml=true&amp;query.tos=${query.tos}', 'search', 'Les Notifications Archivées')" />
	                            </div>
	                    	</span>
	                        <span class="fs-tooltip">
	                            <div>
	                               <span class="fs-tooltiptext" style="width: max-content; z-index: 10; transform: translate(-170px,-62px); padding: 0 9px;" tooltip-content-before="Notifications Archivées ">                                          
	                               </span>
	                               <span class="fs-item-bag fas fa-archive" style="transform: translateY(-39px); font-size: 22px;" onclick="ApplicationManager.run('notify/email/search/AllnotificationEmail?limit=3&amp;query.emailState=Archiver&amp;loadXml=true&amp;query.tos=${query.tos}', 'search', 'Les Notifications Archivées')" />
	                            </div>
	                    	</span>
	                    	
	                    </html>
                        <vbox columns="70% 30%" style="margin-left:24px">
                    		<field xpath="query.unifiedCriteria" noLabel="true" label="" emptyText="Mots clé : Réf dossier, Email, Sujet, ..." widget="text" postProcessing="search()" />
               				<button className="dashboardArchitect_serach_Button" noLabel="true" icon="fas fa-filter" postProcessing="search()" tooltipX="Appliquer filtres" style="margin: auto" />
                  		</vbox>	
                  		<search searchQN="notify/email/search/AllnotificationEmail?limit=3&amp;query.emailState=Brouilon&amp;loadXml=true&amp;query.tos={query.tos}" collectionName="notifs" />
					</fieldset>
				</vbox>


			</vbox>

		</screen>

	</view>


</search>
