<?xml version="1.0" encoding="UTF-8"?>
<search name="HomePage" label="Home Page">
  <query />
  <data>
    <query>
      <search />
      <idObject />
      <parentP />
    </query>
    <collapsed>false</collapsed>
  </data>
  <view>
    <screen labelWidth="80" label="My Dashboard" noToolBar="true">
      <css>

        .menu-geo-gis{
          background: #38A;
          padding:10px;
          
        }

        .menu-geo-gis button.ow-button.float{
          margin-top:0;
        }


        .menu-geo-gis .ow-btn-container{
          text-align: center;
        }

        .menu-geo-gis .ow-btn-container button{
          background:#38A;
          color:#FFF;
          text-transform:uppercase;
        }

        .menu-geo-gis .mon-space{
          background: #FFF !important;
          color: #444 !important;
          border-radius: 23px !important;
        }

        .menu-geo-gis .header-logo .ow-vl-inner{
          margin-top:-10px;
        }

        .body-geo-gis .geo-card{
          display: block;
          padding: 15px;
          margin: 10px 1rem;
          color: var(--fg1);
          background-color: #EEE;
          border-radius: 2px;
          box-shadow: 3px 3px 3px #0004;
          border: 1px solid #DDD;
          height:24.6vh;
          box-sizing: border-box;
          text-align: left;
          cursor: pointer;        }

        .body-geo-gis .geo-card-gb{
          display: block;
          padding: 15px;
          margin: 10px 1rem;
          color: var(--fg1);
          background-color: #EEE;
          border-radius: 2px;
          box-shadow: 3px 3px 3px #0004;
          border: 1px solid #DDD;
          height: calc(73.8vh + 21px);
          box-sizing: border-box;
          text-align: left;

        }

        .body-geo-gis .btn-agrandir{
          color: #FFF;
          background: #666;
        }

        .body-geo-gis .btn-reduire{
          position: absolute;
          right: 30px;
          background: #333;
          color: #EEE;
        }
      </css>
      <script postLoad="true">

        root.instanceId = context.formRender.formInstanceId;
        console.log("instanceId",root.instanceId);
        context.formRender.notifyObservers("instanceId");

        /*
        $("#home-gloAl-"+root.instanceId+" .close").click(function(e){
          var modal = $("#home-gloAl-"+root.instanceId+" #myModal").get(0);
          model.style.display="none";
        })
        */

        var toolbarOptions = [
          [ 'bold', 'italic', 'underline', 'strike' ],
          [{ 'color': [] }, { 'background': [] }],
          [{ 'header': '1' }, { 'header': '2' }],
          [{ 'list': 'ordered' }, { 'list': 'bullet'}, { 'indent': '-1' }, { 'indent': '+1' }],
          [ 'direction', { 'align': [] }],
          ['image'],
        ];

      var ddv = context.formRender.targetPanel.find("#toolbarNBNB").get(0);
      var quill = new Quill(ddv, {
        modules: {
          toolbar: toolbarOptions
        },
        theme: 'snow'
      });

    </script>
    <script postLoad="true" delay="500">
      console.log("context",context);
      
      getMostPopularArticle(4,"",".classSearch-home-gloAl .fieldser-article-1 .vbox-articles .ow-vl-inner");      
    </script>
    <css>
   .hp-box-nbnb{
            display: block;
          padding: 1rem;
        margin: 10px 1rem;
        color: var(--fg1);
        background-color: white;
        border-radius: 2px;
        box-shadow: 3px 3px 3px #0004;
        border: 1px solid #DDD;
        text-align: center;
        height: 100%;
        box-sizing: border-box;
        }

        #toolbarNBNB{
          height: 130px;
        }

        .marquenbnb p{
          display:inline;
          margin-left:5px;
        }
    </css>
    <css>
      
      /* The Modal (background) */
      .geoPortPop .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
      }
      
      /* Modal Content */
      .geoPortPop .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
      }
      
      /* The Close Button */
      .geoPortPop .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
      }
      
      .geoPortPop .close:hover,
      .geoPortPop .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
      }
      </css>
    <vbox style="background:#FFF;">
      <vbox labelAlign="float" style="background:#FFF;width:100%;height:100vh;">
        <vbox columns="auto 11% 11% 11% 11% 11% 11% 14%" className="menu-geo-gis">
          <vbox className="header-logo" columns="70px auto">*
            <html>
              <img style="width:60px" src="img/maroc.png" />
            </html>
            <html style="color: #FFF;font-size: 14px;text-transform:uppercase;padding-top: 15px;">
              GÉOPORTAIL NATIONAL DES
              DOCUMENTS D’URBANISME              
            </html>
          </vbox>
          <button label="ACCUEIL">
          </button>
          <button label="CARTOGRAPHIE">
          </button>
          <button label="ORGANISMES">
          </button>
          <button label="GÉO-SERVICES">
          </button>
          <button label="NOMENCLATURE">
          </button>
          <button label="ACTUALITÉS">
          </button> 
          <button className="mon-space" label="Mon Espace">
          </button>
        </vbox>
        <vbox className="body-geo-gis">
          <vbox columns="33% 67%">
            <vbox>
              <vbox className="geo-card">
                <html xpath="instanceId">
                  <div id="home-gloAl-${instanceId}" class="geoPortPop" onclick="openGeoPopUp('home-gloAl-${instanceId}')">
                    <div><span style="color: #666;font-size: 20px;">Comment ça marche ?</span></div>
                    <div><span style="font-size: 15px;color: #666;">Découvrez le géoportail national de l’urbanisme en 3 mn</span></div>
                    <div style="text-align:center"><i style="width: 70px;text-align: center;font-size: 65px;height: 65px;color: #666;margin-top: 10px;" class="fab fa-youtube" /></div>
                    <div id="myModal" class="modal">

                      <div class="modal-content">
                        <span class="close">x</span>
                        <p>Some text in the Modal..</p>
                      </div>
                  
                    </div>  
                  </div>
                </html>
              
              </vbox> 
              <vbox className="geo-card">
                <html>
                  <div><span style="color: #666;font-size: 20px;color: #666;">Intéressé par une localité précise ?</span></div>
                  <div><span style="font-size: 15px;color: #666;">Consultez les documents d’urbanisme par agence urbaine</span></div>
                  <div style="text-align:center"><i style="width: 70px;text-align: center;font-size: 65px;height: 65px;color: #666;margin-top: 10px;" class="fas fa-university" /></div>
                </html>
              </vbox>
              <vbox className="geo-card">
                <html>
                  <div><span style="color: #666;font-size: 20px;color: #666;">Quelle réglementation de zone ?</span></div>
                  <div><span style="font-size: 15px;color: #666;">Prenez connaissance de la nomenclature nationale</span></div>
                  <div style="text-align:center"><i style="width: 70px;text-align: center;font-size: 65px;height: 65px;color: #666;margin-top: 10px;" class="fas fa-map-marked-alt" /></div>
                </html>
              </vbox>
            </vbox> 
            <vbox className="geo-card-gb">
              <vbox columns="auto 170px">
                <vbox>
                  <html>
                    <div><span style="color: #666;font-size: 20px;color: #666;">Point d’accès unique à toute la donnée urbanistique</span></div>
                    <div><span style="font-size: 14px;color: #666;">En quelques clics, accédez instantanément à l’ensemble des documents d’urbanisme de tout le Royaume !</span></div>
                  </html>
                </vbox>
                <vbox> 
                  <button icon="fas fa-expand" className="btn-agrandir" label="AGRANDIR">
                    <postChange>
                      var mapBrws = context.formRender.targetPanel.find(".geoProtailBck");
                      mapBrws.css({
                        "height": "100vh",
                        "width":"100vw",
                        "position":"fixed",
                        "left":0,
                        "top":0,
                        "z-index":"99"
                      });
                      root.visiblerd = "oui";
                      context.formRender.notifyObservers("visiblerd");
                    </postChange>
                  </button>
                </vbox>
                <vbox>
              </vbox>
              
            </vbox> 
            <vbox style="height:auto;background:#EEE" className="geoProtailBck">
              <button icon="fas fa-expand" className="btn-reduire" visible="('{visiblerd}'=='oui'),expr,boolean" label="RÉDUIRE">
                <postChange>
                  var mapBrws = context.formRender.targetPanel.find(".geoProtailBck");
                  mapBrws.css({
                    "height": "auto",
                    "width":"auto",
                    "position":"relative",
                    "left":0,
                    "top":0,
                    "z-index":"0"
                  }); 
                  root.visiblerd = "";
                  context.formRender.notifyObservers("visiblerd");
                </postChange>
              </button>
              <search mapIdPath="mapIdBrowser" searchQN="dataLoader:gis/service/providers/KGisMapDataLoader?use=search&amp;fromMapBrowser=81" />
            </vbox>
          </vbox>
        </vbox>
      </vbox>
      
      </vbox>
      <vbox className="classSearch-home-gloAl">
        <html>
          <span style="margin-left: 24px;font-size: 19px;color: #555;">
            Derniers documents d’urbanisme publiés
          </span>
        </html>
        <html>
          <div style="height: 30px;" />
        </html>
        
        <html>
          <span style="margin-left: 24px;font-size: 19px;color: #555;">
            Dernières actualités
          </span>
        </html>
        <html>
          <div style="height: 30px;" />
        </html>
        <vbox className="fieldset-articles fieldser-article-1">
          <vbox className="vbox-articles" columns="25% 25% 25% 25%">
             
          </vbox>
          <vbox className="fieldset-footer-home">
              <html>
                  <div style="text-align:right;" class="class-traduction" tcode="APA1" onClick="ApplicationManager.run(&quot;karaz/ux/hub/portailsearch/search/ArticlesListe?query.typeArticle=0&quot;, &quot;search&quot;, &quot;Articles&quot;, {});">Afficher plus d'articles...</div>
              </html>
          </vbox>
        </vbox>

      </vbox>
    </vbox>
      <html>
        <div style="height: 30px;" />
      </html>
    </screen>
  </view>
</search>
