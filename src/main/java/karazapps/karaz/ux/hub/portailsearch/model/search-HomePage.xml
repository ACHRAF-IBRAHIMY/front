<?xml version="1.0" encoding="UTF-8"?>
<search name="HomePage" label="Home Page">
  <query />
  <data>
    <query>
      <search />
      <idObject />
      <parentP />
    </query>
    <collapsed>false</collapsed>
  </data>
  <view>
    <screen labelWidth="80" label="My Dashboard" noToolBar="true">
      <script postLoad="true">
        var slideIndex = 0;

        
      </script>
      <css>

        

        .body-geo-gis .geo-card{
          display: block;
          padding: 15px;
          margin: 30px 1rem;
          color: #666;
          background-color: #EEE;
          border-radius: 2px; 
          box-shadow: 3px 3px 3px #0004;
          border: 1px solid #DDD;
          height: 172px;
          box-sizing: border-box;
          text-align: left;
          position:relative;        
        }

        .body-geo-gis .geo-card-gb{
          display: block;
          padding: 15px; 
          margin: 30px 1rem;
          color: var(--fg1);
          background-color: #EEE;
          border-radius: 2px;
          box-shadow: 3px 3px 3px #0004;
          border: 1px solid #DDD;
          height: 578px;
          box-sizing: border-box;
          text-align: left;
        }

        .body-geo-gis .btn-agrandir{
          color: #FFF;
          background: #666;
        }

        .body-geo-gis .btn-reduire{
          position: absolute;
          right: 0px;
          background: #333;
          color: #EEE;
          z-index: 99;
          margin-top: 0px !important;
          padding: 7.5px 19px;
          border-radius: 0;
        }

        .geoProtailBck .kma-map{
          height: 400px !important;
        }

        .fieldset-footer-home {
        
          font-weight: 100;
        
      }
      </css>
      <script postLoad="true">

        root.instanceId = context.formRender.formInstanceId;
        console.log("instanceId",root.instanceId);
        context.formRender.notifyObservers("instanceId");

        /*
        $("#home-gloAl-"+root.instanceId+" .close").click(function(e){
          var modal = $("#home-gloAl-"+root.instanceId+" #myModal").get(0);
          model.style.display="none";
        })
        */

        var toolbarOptions = [
          [ 'bold', 'italic', 'underline', 'strike' ],
          [{ 'color': [] }, { 'background': [] }],
          [{ 'header': '1' }, { 'header': '2' }],
          [{ 'list': 'ordered' }, { 'list': 'bullet'}, { 'indent': '-1' }, { 'indent': '+1' }],
          [ 'direction', { 'align': [] }],
          ['image'],
        ];

      var ddv = context.formRender.targetPanel.find("#toolbarNBNB").get(0);
      var quill = new Quill(ddv, {
        modules: {
          toolbar: toolbarOptions
        },
        theme: 'snow'
      });

      

    </script>
    <script postLoad="true" delay="500">
      console.log("context",context);
      
      getMostPopularArticle(4,"",".classSearch-home-gloAl .fieldser-article-1 .vbox-articles .ow-vl-inner");      
    </script>
    <css>
      .classSearch-home-gloAl .hp-box-nbnb{
          display: block;
          padding: 1rem;
          margin: 10px 1rem;
          color: var(--fg1);
          background-color: white;
          border-radius: 2px;
          box-shadow: 3px 3px 3px #0004;
          border: 1px solid #DDD;
          text-align: center;
          height: 100%;
          box-sizing: border-box;
        }

        #toolbarNBNB{
          height: 130px;
        }

        .marquenbnb p{
          display:inline;
          margin-left:5px;
        }
    </css>
    <css>
      
      /* The Modal (background) */
      .geoPortPop .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
      }
      
      /* Modal Content */
      .geoPortPop .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
      }
      
      /* The Close Button */
      .geoPortPop .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
      }
      
      .geoPortPop .close:hover,
      .geoPortPop .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
      }

      .geo-card-gb.geo-grd .geoProtailBck{
        height: 485px ;
      }
      
      .geo-card-gb.geo-grd .kma-side-right{
        height: 570px !important;
      }

      .geo-card-gb.geo-grd .esriMapContainer{
        height: 560px !important;
        overflow: hidden;
      }

      .geo-card-gb.geo-grd  .kma-homeButton-container {
        position: absolute;
        left: 22px;
        bottom: 0px;
        top: 480px;
        height: 100%;
    }

      .geo-card-gb.geo-grd .HomeButton .home {
      }
      
      .geo-card-gb.geo-grd .esriScalebar{
        left: 25px;
        height: 100%;
        top: 518px;
      }

      .geo-card-gb.geo-grd .kma-homeButton-container{
        bottom: 105px;
      }

      .geo-card-gb.geo-rdw .geoProtailBck,.geo-card-gb.geo-rdw .kma-side-right{
      }

      .geo-card-gb.geo-rdw .esriMapContainer{
      }

      .geo-card-gb.geo-rdw .HomeButton .home {
      }
      
      .geo-card-gb.geo-rdw .esriScalebar{
      }
      

      .tooltip-geo1 .tooltiptext1,.tooltip-geo2 .tooltiptext2,.tooltip-geo3 .tooltiptext3 {
        visibility: hidden;
        width: 120px;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 5px 0;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        margin-left: -60px;
        opacity: 0;
        transition: opacity 0.3s;
      }
      
      .tooltip-geo1 .tooltiptext1::after,.tooltip-geo2 .tooltiptext2::after,.tooltip-geo3 .tooltiptext3::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: #555 transparent transparent transparent;
      }
      
      .tooltip-geo1:hover .tooltiptext1,.tooltip-geo2:hover .tooltiptext2,.tooltip-geo3:hover .tooltiptext3 {
        visibility: visible;
        opacity: 1;
      }

      .agrandir-cls-btn .ow-btn-container{
        margin: 0px 0px;
        text-align: right;
      }


      .agrandir-cls-btn button.ow-button.float {
        margin-top: 7px;
    }


    .classSearch-home-gloAl .fieldset-footer-home {
      padding: 15px;
      font-size: 17px;
      width: 98%;
      margin: auto;
      border-radius: 2px;
      margin-top: 13px;
      cursor: pointer;
  }

  .geoPortPop .modal2 .modal-content{
    height: 90%;
  }

      </css>
    <vbox style="background:#FFF;">
      <vbox labelAlign="float" style="background:#FFF;width:100%;height:auto;">
        
        <vbox className="body-geo-gis">
          <vbox columns="31% 69%">
            <vbox>
              <vbox className="geo-card geoCard1">
                <html xpath="instanceId">
                  <div class="geoPortPop">
                    <div class="upgrade-grid-geoCard" style="display:grid;grid-template-columns: 90px auto;">
                      <div style="text-align:left;"><i style="width: 70px;text-align: left;font-size: 65px;height: 65px;" class="upgrade-icon fab fa-youtube" /></div>
                      <div>
                        <div class="">
                          <div><span class="upgrade-1 upgrade-1-title" style="font-size: 20px;">Comment ça marche ?</span></div>
                          <div><span class="upgrade-1 upgrade-1-p" style="font-size: 16px;">Découvrez le géoportail national de l’urbanisme en 3 mn</span></div>
                          <div>
                            <p class="upgrade-2" style="font-size:15px;text-align:justify;margin-top: 4px;margin-bottom: 5px;">
                              Dans cette vidéo de 3 mn vous aurez un premier aperçu sur la nature et la consistance des géo-données publiées sur le Géoportail national, les fonctionnalités de navigation spatiale et les outils de recherche qu’il propose.
                            </p>
                          </div>
                        </div>
                        
                         
                          <div class="respon-voir" style="text-align: right;font-size: 16px;cursor: pointer;position: absolute;right: 5px;bottom: 3px;right: 16px;bottom: 15px;">
                          <span onclick="openGeoPopUp('home-gloAl-${instanceId}')" style="margin-right:5px"> <i class="fas fa-eye" /> Voir</span>
                          <span onClick="ApplicationManager.run(&quot;karaz/ux/hub/portailsearch/search/ArticleConsultation?query.idObject=wHhPAHMBDvwdgr5cTBJA&quot;, &quot;search&quot;, &quot;Article&quot;, {});"> <i class="fas fa-info-circle" /> À propos </span>
                        </div>
                        </div>  
                      
                    </div> 
                  
                  </div>
                </html>
              
              </vbox> 

              <html xpath="instanceId" className="geoPortPop">
                <div id="home-gloAl-${instanceId}">
                  <div id="myModal" class="modal modal2">
                    <div class="modal-content">
                      <span class="close" onclick="closeGeoPopUp('home-gloAl-${instanceId}')">x</span>
                      <p />
                      <iframe width="100%" height="90%" src="https://www.youtube.com/embed/vCXPkmv_bDk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="true" />
                    </div>
                  </div>
                </div>
                
              </html>

              

              <vbox className="geo-card geoCard2">
                <html>
                  <div class="upgrade-grid-geoCard" style="display:grid;grid-template-columns: 90px auto;">
                    <div style="text-align:left;"><i style="width: 70px;text-align: left;font-size: 65px;height: 65px;" class="fas fa-university upgrade-icon" /></div>
                    <div>
                      <div class=""> 
                      <div><span class="upgrade-1 upgrade-1-title" style="font-size: 20px;">Intéressé par une localité précise ?</span></div>
                      <div><span class="upgrade-1 upgrade-1-p" style="font-size: 16px;">Consultez les documents d’urbanisme par agence urbaine</span></div>
                      <div class="">
                        <p class="upgrade-2" style="font-size:15px;text-align:justify;margin-top: 4px;margin-bottom: 5px;">
                          Si vous êtes intéressés par une localité en particulier, vous pouvez accéder ici directement aux documents d’urbanisme produits par chaque agence urbaine du territoire national.

                        </p>
                      </div>
                      </div>
                      <div class="respon-voir" style="                       text-align: right;                       font-size: 16px;;                                                  cursor: pointer;                       position: absolute;   right: 16px;bottom: 15px; ">
                      <span onclickxx="openGeoPopUp('home-gloAl-${instanceId}')" onClick="ApplicationManager.run(&quot;karaz/ux/hub/portailsearch/search/UrbanismeSearch&quot;, &quot;search&quot;, &quot;Documents d'urbanisme&quot;, {});" style="margin-right:5px"> <i class="fas fa-eye" /> Voir</span>
                      <span onClick="ApplicationManager.run(&quot;karaz/ux/hub/portailsearch/search/ArticleConsultation?query.idObject=y3iSAHMBDvwdgr5cvhKt&quot;, &quot;search&quot;, &quot;Article&quot;, {});"> <i class="fas fa-info-circle" /> À propos </span>

                    </div>
                    </div> 
                  </div>
                </html>
              </vbox>

              <css>
                .geo-card.geoCard1:hover,.geo-card.geoCard2:hover,.geo-card.geoCard3:hover{
                  background:#666;
                  color:#EEE;
                  box-shadow: 3px 3px 3px #666;
                  border: 1px solid #666;
                  transition: 0.5s;
                } 

                .geo-card.geoCard1:hover .upgrade-2,.geo-card.geoCard2:hover .upgrade-2,.geo-card.geoCard3:hover .upgrade-2{
                  display:block;
                }

                .geo-card.geoCard1 .upgrade-2,.geo-card.geoCard2 .upgrade-2,.geo-card.geoCard3 .upgrade-2{
                  display:none;
                }

                .geo-card.geoCard1:hover .upgrade-1,.geo-card.geoCard2:hover .upgrade-1,.geo-card.geoCard3:hover .upgrade-1{
                  display:none;
                }

                
              </css>

              <vbox className="geo-card geoCard3">
                <html>
                  <div class="upgrade-grid-geoCard" style="display:grid;grid-template-columns: 90px auto;">
                    <div style="text-align:left;"><i style="width: 70px;text-align: left;font-size: 65px;height: 65px;" class="fas fa-map-marked-alt upgrade-icon" /></div>
                    <div>
                      <div class="">

                      <div>
                        <span class="upgrade-1 upgrade-1-title" style="font-size: 20px;">Quelle réglementation de zone ?</span>
                      </div>
                      <div>
                        <span class="upgrade-1 upgrade-1-p" style="font-size: 16px;">Prenez connaissance de la nomenclature nationale</span>
                      </div>
                      <div>
                        <p class="upgrade-2" style="font-size: 15px;color:#EEE;text-align:justify;margin-top: 4px;margin-bottom: 5px;">
                          Dans le but d’uniformiser les documents d’urbanisme et d’en faciliter l’exploitation, une nomenclature nationale standard a été publiée par le Ministère. 
                          Prenez-en connaissance à travers cet outil interactif.
                        </p>
                      </div>
                      </div>
                          <div class="respon-voir" style="text-align: right;font-size: 16px;cursor: pointer;position: absolute;right: 16px;bottom: 15px;">
                          <span onclick="ApplicationManager.run(&quot;karaz/ux/hub/portailsearch/search/NomenclatureSearch?query.idObject=y3iSAHMBDvwdgr5cvhKt&quot;, &quot;search&quot;, &quot;Article&quot;, {});" onclickxx="openGeoPopUp('home-gloAl-header-popup2')" style="margin-right:5px"> <i class="fas fa-eye" /> Voir</span>  
                          <span onclickx="openGeoPopUp('home-gloAl-header-popup2')"> <i class="fas fa-info-circle" onClickx="ApplicationManager.run(&quot;karaz/ux/hub/portailsearch/search/ArticleConsultation?query.idObject=y3iSAHMBDvwdgr5cvhKt&quot;, &quot;search&quot;, &quot;Article&quot;, {});" /> À propos </span>
                        </div>
                    </div>
                  </div> 
                  
                </html>
              </vbox>
            </vbox> 
            <vbox className="geo-card-gb geo-grd">
              <vbox columns="auto 189px" style="margin-bottom: 10px;">
                <vbox>
                  <html>
                    <div><span class="upgrade-1-para-title" style="color: #666;font-size: 20px;color: #666;">Point d’accès unique à toute la donnée urbanistique</span></div>
                    <div><span class="upgrade-1-para-p" style="font-size: 14px;color: #666;">En quelques clics, accédez instantanément à l’ensemble des documents d’urbanisme de tout le Royaume !</span></div>
                  </html>
                </vbox>
                <vbox className="agrandir-cls-btn"> 
                  <button icon="fas fa-expand" className="btn-agrandir" label="Accéder au Géoportail">
                    <postChange>
                      /* var mapBrws = context.formRender.targetPanel.find(".geoProtailBck");
                      mapBrws.css({
                        "height": "100vh",
                        "width":"100%",
                        "position":"fixed",
                        "left":0,
                        "top":0,
                        "z-index":"99"
                      });
                      root.visiblerd = "oui";
                      context.formRender.targetPanel.find(".geo-card-gb").addClass("geo-rdw");
                      context.formRender.targetPanel.find(".geo-card-gb").removeClass("geo-grd");

                      context.formRender.notifyObservers("visiblerd"); */
                      ApplicationManager.run("karaz/ux/hub/portailsearch/search/MapBrwSearch?query.mapId=0002", "search", "GÉOPORTAIL", {});
                    </postChange>
                  </button>
                </vbox>
                <vbox>
              </vbox>
              
            </vbox> 
            <vbox style="height:450px;background:#EEE" className="geoProtailBck">
              <button icon="fas fa-expand" className="btn-reduire" visible="('{visiblerd}'=='oui'),expr,boolean" label="RÉDUIRE">
                <postChange>
                  var mapBrws = context.formRender.targetPanel.find(".geoProtailBck");
                  mapBrws.css({
                    "height": "450px",
                    "width":"auto",
                    "position":"relative",
                    "left":0,
                    "top":0,
                    "z-index":"0"
                  }); 
                  root.visiblerd = "";
                  context.formRender.targetPanel.find(".geo-card-gb").addClass("geo-grd");
                  context.formRender.targetPanel.find(".geo-card-gb").removeClass("geo-rdw");
                  context.formRender.notifyObservers("visiblerd");
                </postChange>
              </button>
              <vbox>
                <html xpath="instanceId">
                  <!-- <div class="gallery js-flickity">
                    <div class="gallery-cell"></div>
                    <div class="gallery-cell"></div>
                    <div class="gallery-cell"></div>
                    <div class="gallery-cell"></div>
                    <div class="gallery-cell"></div>
                  </div> -->
                  <!-- <div class="clearfix" style="max-width:474px;">
                    <ul id="lightSlider" class="gallery">
                      <li data-thumb="extensions/img/imageSlide1.png"> <a href="#"> <img src="extensions/img/imageSlide1.png" /> </a> </li>
                      <li data-thumb="extensions/img/imageSlide2.png"> <a href="#"> <img src="extensions/img/imageSlide2.png" /> </a> </li>
                      <li data-thumb="extensions/img/imageSlide3.png"> <a href="#"> <img src="extensions/img/imageSlide3.png" /> </a> </li>
                      <li data-thumb="extensions/img/imageSlide4.png"> <a href="#"> <img src="extensions/img/imageSlide4.png" /> </a> </li>
                      <li data-thumb="extensions/img/imageSlide5.png"> <a href="#"> <img src="extensions/img/imageSlide5.png" /> </a> </li>
                    </ul>
                    </div> -->
                      <!-- <img style="width: 100%;height: 485px;" src="extensions/img/GIF_GEOPORTAIL.gif"></img> -->
                      <div class="simple-slider simple-slider-first-${instanceId}">
                        <div class="slider-wrapper">
                          <div class="slider-slide" style="background-image: url('extensions/img/imageSlide1.png')">
                          </div>
                      
                          <div class="slider-slide" style="background-image: url('extensions/img/imageSlide2.png')">
                          </div>
                      
                          <div class="slider-slide" style="background-image: url('extensions/img/imageSlide3.png')">
                          </div>
                          <div class="slider-slide" style="background-image: url('extensions/img/imageSlide4.png')">
                          </div>
                          <div class="slider-slide" style="background-image: url('extensions/img/imageSlide5.png')">
                            
                          </div>
                        </div>
                        </div>
                      <script>
                        var slider = new simpleSlider('.simple-slider-first-${instanceId}', {speed: 500},{delay:500});
                      </script>
                </html>
              </vbox>
            </vbox>
          </vbox>
        </vbox>
      </vbox>
      
      </vbox>
      <html>
        <div style="height: 20px;" />
      </html>
      <vbox className="classSearch-home-gloAl">
        <html>
          <span style="margin-left: 24px;margin-top: 14px;font-size: 21px;color: #555;">
            Derniers documents d’urbanisme publiés
          </span>
        </html>
        <html>
        </html>
        <vbox>
          <search searchQN="gis/virtual/search/AllVirtual?searchName=docUrbanismeAcc" />
          <vbox className="fieldset-footer-home">
            <html>
                <div style="text-align:right;width:99%;" class="class-traduction" tcode="APA1"><span style="background: #38A;color: #FFF;padding: 5px 10px;border-radius: 2px;" onClick="ApplicationManager.run(&quot;karaz/ux/hub/portailsearch/search/UrbanismeSearch&quot;, &quot;search&quot;, &quot;Document d'urbanisme&quot;, {});">Tous documents d’urbanisme</span></div>
            </html>
          </vbox>
        </vbox>
        
        <html>
          <span style="margin-left: 24px;margin-top: 14px;font-size: 21px;color: #555;">
            Dernières ressources publiées
          </span> 
        </html>
        <html>  
          <div style="height: 20px;" />
        </html>
        <vbox className="fieldset-articles fieldser-article-1" style="width: 98.5%;margin: auto;">
          <vbox className="vbox-articles" columns="25% 25% 25% 25%">
             
          </vbox>
          <vbox className="fieldset-footer-home">
              <html>
                  <div style="text-align:right;" class="class-traduction" tcode="APA1"><span style="background: #38A;color: #FFF;padding: 5px 10px;border-radius: 2px;" onClick="ApplicationManager.run(&quot;karaz/ux/hub/portailsearch/search/ArticlesListe?query.typeArticle=0&quot;, &quot;search&quot;, &quot;Articles&quot;, {});">Toutes les ressources                  </span></div>
              </html>
          </vbox>
        </vbox>

      </vbox>
    </vbox>
     
    </screen>
  </view>
</search>
